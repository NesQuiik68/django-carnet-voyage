<file>
      {% extends 'base.html' %}

      {% block title %}{{ destination.name }}{% endblock %}

      {% block content %}
          <h1>{{ destination.name }}</h1>
          <p>{{ destination.description }}</p>
          <h2>Lieux</h2>
          <ul>
              {% for lieu in destination.lieux.all %}
                  <li>
                      {{ lieu.name }}
                      <ul>
                          {% for avis in lieu.avis.all %}
                              <li>Note: {{ avis.note }}, Commentaire: {{ avis.commentaire }}</li>
                          {% empty %}
                              <li>Pas d'avis pour ce lieu.</li>
                          {% endfor %}
                      </ul>
                  </li>
              {% empty %}
                  <li>Pas de lieux pour cette destination.</li>
              {% endfor %}
          </ul>
          <form method="post" action="{% url 'ajouter_favori' destination.pk %}">
              {% csrf_token %}
              {% if user.is_authenticated %}
                  {% if user.isLoggedIn %}
                      {% if destination in user.favoris.first.destinations.all %}
                          <button type="submit" class="btn btn-danger">Retirer des favoris</button>
                      {% else %}
                          <button type="submit" class="btn btn-success">Ajouter aux favoris</button>
                      {% endif %}
                  {% else %}
                      <p class="alert alert-warning">Connectez-vous pour ajouter aux favoris.</p>
                  {% endif %}
              {% else %}
                  <p class="alert alert-warning">Connectez-vous pour ajouter aux favoris.</p>
              {% endif %}
          </form>
          <a href="{% url 'destination_list' %}" class="btn btn-secondary mt-3">Retour Ã  la liste des destinations</a>
      {% endblock %}
    </file>
